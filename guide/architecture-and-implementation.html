<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Architecture and implementation | MyShop Documentation</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Decentralized e-commerce platform using Solid pods">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.64ccb15a.css" as="style"><link rel="preload" href="/assets/js/app.d34ef9f7.js" as="script"><link rel="preload" href="/assets/js/2.8445d36e.js" as="script"><link rel="preload" href="/assets/js/3.1f38620c.js" as="script"><link rel="prefetch" href="/assets/js/10.37c211e9.js"><link rel="prefetch" href="/assets/js/11.f259eb75.js"><link rel="prefetch" href="/assets/js/12.21980dfb.js"><link rel="prefetch" href="/assets/js/13.66719568.js"><link rel="prefetch" href="/assets/js/14.350a42d8.js"><link rel="prefetch" href="/assets/js/15.93882262.js"><link rel="prefetch" href="/assets/js/4.cf1b3b64.js"><link rel="prefetch" href="/assets/js/5.67127978.js"><link rel="prefetch" href="/assets/js/6.ca79a2ad.js"><link rel="prefetch" href="/assets/js/7.ba5fc395.js"><link rel="prefetch" href="/assets/js/8.0588b64c.js"><link rel="prefetch" href="/assets/js/9.de22f54c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.64ccb15a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MyShop Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/Applied-Blockchain-Lab/myshop" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/Applied-Blockchain-Lab/myshop" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/guide/architecture-and-implementation.html" aria-current="page" class="active sidebar-link">Architecture and implementation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/architecture-and-implementation.html#vue-js-web-application" class="sidebar-link">Vue.js Web Application</a></li><li class="sidebar-sub-header"><a href="/guide/architecture-and-implementation.html#p2p-connection-manager" class="sidebar-link">P2P Connection Manager</a></li><li class="sidebar-sub-header"><a href="/guide/architecture-and-implementation.html#escrow-bulk-transactions-smart-contract" class="sidebar-link">Escrow Bulk Transactions Smart Contract</a></li><li class="sidebar-sub-header"><a href="/guide/architecture-and-implementation.html#public-ip-resolver" class="sidebar-link">Public IP Resolver</a></li><li class="sidebar-sub-header"><a href="/guide/architecture-and-implementation.html#reverse-proxy" class="sidebar-link">Reverse proxy</a></li></ul></li><li><a href="/guide/solid-pod-containers.html" class="sidebar-link">Solid Pod Containers</a></li><li><a href="/guide/usage.html" class="sidebar-link">Usage</a></li><li><a href="/guide/source-code.html" class="sidebar-link">Source code</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="architecture-and-implementation"><a href="#architecture-and-implementation" class="header-anchor">#</a> Architecture and implementation</h1> <p><a href="#architecture"><img src="/assets/img/architecture.3e54938d.png" alt="Architecture image"></a></p> <h2 id="vue-js-web-application"><a href="#vue-js-web-application" class="header-anchor">#</a> Vue.js Web Application</h2> <p><a href="#vuejs-web-application"><img src="/assets/img/web-app.2e16726a.png" alt="Web app image"></a></p> <h3 id="stores"><a href="#stores" class="header-anchor">#</a> Stores</h3> <p>The web application has four stores for state management:</p> <ul><li><strong>Solid</strong> - Interacts with Solid protocol functions and Escrow Bulk Transactions Smart Contract functions. Mainly uses <code>@inrupt/solid-client</code> library for CRUD operations on Solid Pod.</li> <li><strong>Websocket</strong> - Interacts with the Websocket server and saves state about connecting users. Also listens for emitted events.</li> <li><strong>Connection</strong> - Interacts with the MetaMask browser extension. Handles account changes, account information changes, signature creation, etc.</li> <li><strong>Blockchain</strong> - Saves state about current Shop address and balance.</li></ul> <h3 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> Vue router</h3> <p>The official router for Vue.js. Imports every view for dynamic routing. Every route has a guard which checks if the user has logged in his Solid Pod and if MetaMask is connected to the web application.</p> <h3 id="app-vue"><a href="#app-vue" class="header-anchor">#</a> App.vue</h3> <p>Consists of main navigation bar where the user can go to main pages of the application and a footer with a link to the web application's GitHub repository. When the user is logged in to the Solid Pod and connected to the MetaMask, his WebId and Websocket Server URL is showed on the navigation bar.</p> <h3 id="views"><a href="#views" class="header-anchor">#</a> Views</h3> <ul><li><strong>ActiveOrders.vue</strong> - Shows products which are purchased from the user and are active (either there is not an agreement between parties or deadline has not passed). There is a refresh button, which pulls active orders from the smart contract and two buttons for order confirmation and for requesting a refund - both of them are for the client, who purchased a product.</li> <li><strong>AllOrders.vue</strong> - History for all purchased products. Shows only the ID of the product and price in native coin of the blockchain.</li> <li><strong>CartPage.vue</strong> - Shows all products added to the cart. Contains information about product image and name, shop name, quantity and price. Quantity can be changed according to available quantity. Total price is calculated dynamically. There are two buttons: to remove a product from the cart and for the checkout, which redirects to another page where user can make the actual purchase.</li> <li><strong>CheckoutPage.vue</strong> - Shows information about the connected MetaMask account and shipping information fetched from the profile page of the user. Shipping information can be changed here and it will be saved in the Solid Pod of the user. There is a disconnect button to change the wallet and another button, which interacts with the smart contract.</li> <li><strong>ContactsView.vue</strong> - Show all contacts which are either added by searching a shop or when client requests an access to user's shop. WebId, My Shops and Their Shops is saved in <code>contacts.json</code> in Solid Pod and are fetched from there. Online status is received from the Websocket server. There are buttons for accepting and rejecting a contact for each of the sections.</li> <li><strong>CreateItem.vue</strong> - Consists of different inputs for: <code>Name</code>, <code>Description</code>, <code>From date</code>, <code>To date</code>, <code>Currency</code>, <code>Price</code>, <code>Quantity</code>, <code>Shipping</code>, <code>Picture</code>. Every field is mandatory. Item information is saved in the Solid Pod.</li> <li><strong>CreateShop.vue</strong> - Consists of two inputs for <code>Shop name</code> and <code>Cover picture</code>. Shop information is saved in the Solid Pod.</li> <li><strong>EditItemPage.vue</strong> - Very similar to the <em>CreateItem</em> page. The only difference is that the old information about the product is showed in the inputs.</li> <li><strong>HomeView.vue</strong> - There are two sections when user is not logged in: section to search and connect to other shop and to log in to the Solid Pod, which can be done either with typing the URL and pressing the <code>Connect</code> button or with selecting an existing Pod provider from the list. After the user has successfully logged in to the Solid Pod, a <code>Connect your wallet</code> prompt appears on the main screen. There, the user should connect his MetaMask account to the web application. When connected, user is prompted with an notification where he should create an signature for authentication purposes. After the signature creation, he should log in again in order his signature be verified with the backend server.</li> <li><strong>Market.vue</strong> - Shows all shops in which user is accepted and has an access. There is a filter where user can view all the shops or he can select one or several of all.</li> <li><strong>MyInfo.vue</strong> - Shows the shipping information for the user, which consists of <code>First name</code>, <code>Last name</code>, <code>Phone number</code> and <code>Address</code>. Every one of them can be changed and can be saved with the <code>Save</code> button.</li> <li><strong>MySales.vue</strong> - Shows all created shops and a <code>View</code> button beside them which if clicked, redirects the user to the current shop's active orders (<code>ShopOrders.vue</code>).</li> <li><strong>MyShops.vue</strong> - Shows all created shops, which are clickable (redirected to the <code>ShopItems.vue</code> page) and a <code>Create shop</code> button where user is redirected to <code>CreateShop.vue</code>.</li> <li><strong>ProfilePage.vue</strong> - Consists of a sidebar navigation panel with routes to <code>MyInfo.vue</code>, <code>ActiveOrders.vue</code>, <code>AllOrders.vue</code>, <code>MySales.vue</code>.</li> <li><strong>ShopItems.vue</strong> - Shows all created items for the current shop with short info: image, name, price, edit and delete button. Also, there are two buttons: <code>pen icon</code> button, which opens a modal where user can edit the information about the current shop and <code>Create Item</code> button, which redirects the user to <code>CreateItem.vue</code>.</li> <li><strong>ShopOrders.vue</strong> - Shows products which are purchased from one of the user's shop and are active (either there is not an agreement between parties or deadline has not passed). There is information about the <code>Product name</code>, <code>Price</code>, <code>Shop owner's decision</code>, <code>Client's decision</code>, <code>Deadline for the client's decision</code>, <code>Shipping information about the client</code>. Also, there are two buttons for order confirmation and for requesting a refund - both of them are for the shop owner.</li></ul> <h3 id="components"><a href="#components" class="header-anchor">#</a> Components</h3> <ul><li><strong>ItemElement.vue</strong> - Product from Market with image, price and <code>Add to Cart</code> button. There is a check if product is in stock or not.</li> <li><strong>MyItemElement.vue</strong> - Product from the Shop of the user. It is very similar to the <code>ItemElement.vue</code> with the difference that it has <code>Edit</code> and <code>Delete</code> buttons. When item is deleted, the image disappers and a <code>Deleted</code> text shows on the screen.</li> <li><strong>OnlineCircle.vue</strong> - Shows the status of the contact in Contacts page. It can be in two colors: grey(offline) and green(online).</li> <li><strong>ProvidersDialog.vue</strong> - A list for fast selection of providers. Consists of localhost and some of the most popular third party Solid Pod providers according to <a href="https://solidproject.org/users/get-a-pod" target="_blank" rel="noopener noreferrer">Solid<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: <a href="https://solidcommunity.net/" target="_blank" rel="noopener noreferrer">Solidcommunity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://solidweb.org/" target="_blank" rel="noopener noreferrer">Solidweb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://start.inrupt.com/profile" target="_blank" rel="noopener noreferrer">Inrupt Pod Spaces<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li><strong>RegisterModal.vue</strong> - Creates a Solid WebId and Pod Storage. Currently only supports <a href="https://github.com/CommunitySolidServer/CommunitySolidServer" target="_blank" rel="noopener noreferrer">Community Solid Server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which should be started locally. The modal's inputs are: <code>Pod name</code>, <code>Email</code>, <code>Password</code> and <code>Confirm</code>.</li> <li><strong>RequestingAccess.vue</strong> - A modal which only appears on the screen when a user wants to connect to a shop. It shows the connection requesting user's WebId and the shop where he wants to have an access. There are three buttons which are emitting different events: <code>Confirm</code> emits <code>accepted</code> event, <code>Reject</code> emits <code>rejected</code> event and <code>x</code> on the upper right emits <code>pending</code> event. The event is also broadcasted to the Websocket server of the connection requesting user. Regardless of the pressed button, the user will be added to the <code>contacts.json</code> located in the Pod Storage and will appear in the <code>Contacts</code> page.</li> <li><strong>ShopElement.vue</strong> - Shop card from MyShops page or Market page. It has only a clickable cover image of the shop. In the Market page if user does not have access anymore to the shop, in place of the cover image is a message and a button to remove the shop card.</li> <li><strong>ShopElementCreate.vue</strong> - Card with plus for Sshop or item creation.</li> <li><strong>ShopModal.vue</strong> - A modal with information about the current shop. The <code>Address</code> and <code>Balance</code> are dynamically loaded. <code>Withdraw</code> button fetches all the balance from the Shop to the currently selected MetaMask account. <code>Copy Private Key</code> copies the private key from the Solid Pod Storage. The user can change the shop name from <code>Name</code> field. <code>Shop url</code> and <code>Products</code> fields are disabled. There is also a <code>Delete shop</code> button.</li> <li><strong>TheLogin.vue</strong> - If the user is not logged in his Solid Pod, it shows an <code>Connect</code> button which tries to connect to the Solid Pod provider from the input field and a <code>Select a pod provider</code> button which opens the <code>ProvidersDialog.vue</code> modal. When the user has logged in successfully there will appear a message depending on whether there are &quot;containers&quot; in the user's Solid Pod.</li> <li><strong>TheWallet.vue</strong> - There is only a <code>Connect</code> button if the user has not connected his MetaMask to the web application. After a successfull connection there are a <code>Balance</code> and <code>Address</code> fields. <code>Disconnect</code> button detaches the wallet from the web application.</li></ul> <h2 id="p2p-connection-manager"><a href="#p2p-connection-manager" class="header-anchor">#</a> P2P Connection Manager</h2> <p><a href="#p2p-connection-manager"><img src="/assets/img/p2p-connection-manager.93ed8d7a.png" alt="P2P Connection Manager image"></a></p> <p>P2P Connection Manager GitHub repository: <a href="https://github.com/Applied-Blockchain-Lab/solid-websocket-server" target="_blank" rel="noopener noreferrer">Link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="authentication-manager"><a href="#authentication-manager" class="header-anchor">#</a> Authentication manager</h3> <p>Authentication is required for event handlers that are used only for the shop owner's side. It is implemented with cryptographic signatures. Before the server is started the user should pass his MetaMask account's public key to the Websocket server. You can check the Websocket server's GitHub repository for more information.<br>
Client side (Vue.js web appplication) should create an object with the following content and send it to the Websocket server when emitting an authenticated event:</p> <ul><li>signature - A cryptographic text created (signed) with the private key of the MetaMask account.</li> <li>message - An object which holds a Unix timestamp after which signature is not valid. Default value is <strong>1 hour</strong>.</li></ul> <p>The server performs some checks and according to the result sends a <code>blocked</code> event and returns from the function or continues with the execution of the function.</p> <h3 id="rate-limiter"><a href="#rate-limiter" class="header-anchor">#</a> Rate limiter</h3> <p>Rate limiting is done through IP address of the client and by default one connection attempt should be made every 10 seconds. Rate limiter is implemented for every event handler. If there is a connection from same IP address in this duration, a <code>blocked</code> event is sent to the client with the remaining milliseconds for the second attempt.</p> <h3 id="ngrok-tunnel-creator"><a href="#ngrok-tunnel-creator" class="header-anchor">#</a> Ngrok tunnel creator</h3> <p>Creates an Ngrok tunnel using the official APIs of the Ngrok. Ngrok is a cross-platform application that exposes local server ports to the Internet. The tunnel creation is optional and can be configured before starting the Websocket server. It is used mainly for bypassing CGNAT or other similar double NAT ISP setups.</p> <h2 id="escrow-bulk-transactions-smart-contract"><a href="#escrow-bulk-transactions-smart-contract" class="header-anchor">#</a> Escrow Bulk Transactions Smart Contract</h2> <p><a href="#escrow-bulk-transactions-smart-contract"><img src="/assets/img/escrow-bulk-transactions.05a4c3fe.png" alt="Escrow Bulk Transactions image"></a></p> <p>Escrow Bulk Transactions Smart Contract GitHub repository: <a href="https://github.com/Applied-Blockchain-Lab/shops-bulk-transactions" target="_blank" rel="noopener noreferrer">Link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>When the user buys something from a given shop, the web application (<em>Buyer</em>) calls <code>multiTransfer</code> function which creates and saves order/orders information in the smart contract. He also transfers a required amount of tokens to the smart contract's address.</p> <p>The <code>Buyer</code>/<code>Seller</code>/<code>Arbiter</code> should make a &quot;decision&quot; in order to have an agreement about the purchased product/products. These three addresses control the payment and the smart contract needs the consent of two of them to either proceed the tokens to the seller or to the buyer. The buyer or the seller can change their decision from the web application anytime.</p> <p>Decisions are encoded in the smart contract as:</p> <ul><li>0 - &quot;no decision&quot;</li> <li>1 - &quot;process transaction to the seller&quot;</li> <li>2 - &quot;return tokens to the buyer&quot;</li></ul> <p>Possible cases when <code>Buyer</code> orders an item:</p> <ul><li>If the <code>Buyer</code> confirms the arrival of the product/products, the smart contract sends the tokens to the <code>Seller</code>.</li> <li>The oracle sends a message that the order has arrived - the smart contract sends the tokens to the <code>Seller</code>.</li> <li>The <code>Buyer</code> requests a refund:
<ul><li>The <code>Seller</code> agrees - the smart contract sends the tokens to the <code>Buyer</code>.</li> <li>The <code>Seller</code> does not agree - both of them wait for <code>Arbiter</code>'s decision.</li></ul></li> <li>The <code>Seller</code> requests a refund:
<ul><li>The <code>Buyer</code> agrees - the smart contract sends the tokens to the <code>Seller</code>.</li> <li>The <code>Buyer</code> does not agree - both of them wait for <code>Arbiter</code>'s decision.</li></ul></li> <li>If by the end of the deadline the <code>Buyer</code> does not confirm the arrival of the products, it is assumed that they arrived and the smart contract sends the tokens to the <code>Seller</code>'s address.</li> <li>If the <code>Buyer</code> asks for a deadline extension, he should open a dispute. Here can be two options: either the <code>Seller</code> agrees to return the tokens or both of them wait for <code>Arbiter</code>'s decision.</li></ul> <p>In current version <code>Arbiter</code>'s address is set when the contract is deployed, can not be changed and does not have an UI to interact with the smart contract. This will be changed in future releases.</p> <h2 id="public-ip-resolver"><a href="#public-ip-resolver" class="header-anchor">#</a> Public IP Resolver</h2> <p><strong>IMPORTANT</strong>: Only necessary if the Solid Pod is started locally (Community Solid Server) or the MyShop project is an Electron desktop application. Currently it is implemented as an Web application.</p> <p>Public IP Resolver GitHub repository: <a href="https://github.com/Applied-Blockchain-Lab/myshop-express-server" target="_blank" rel="noopener noreferrer">Link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Default port is <strong>4000</strong>.<br>
Consists of two endpoints:</p> <ul><li>/</li></ul> <p>Serves a static file (<code>index.html</code>) from the <code>dist</code> directory.</p> <ul><li>/address</li></ul> <p>Fetches the public IP address of the machine using <a href="https://www.ipify.org/" target="_blank" rel="noopener noreferrer">ipify<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>'s API. Saves the IP address in <code>.address</code> file and returns it to the user.</p> <h2 id="reverse-proxy"><a href="#reverse-proxy" class="header-anchor">#</a> Reverse proxy</h2> <p><strong>IMPORTANT</strong>: Only necessary if the Solid Pod is started locally (Community Solid Server) or the MyShop project is an Electron desktop application. Currently it is implemented as an Web application.</p> <p>Reverse proxy GitHub repository: <a href="https://github.com/Applied-Blockchain-Lab/solid-proxy" target="_blank" rel="noopener noreferrer">Link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Default port is <strong>9002</strong>.<br>
It is used to create a self-signed TLS certificate (when the user does not have a domain for the Community Solid Server and insted of that the public IP address is used) because Solid requires a secure protocol for the WebIDs. You can check the discussion: <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/discussions/1352" target="_blank" rel="noopener noreferrer">Unauthorized error when baseUrl is router IP address #1352<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/guide/solid-pod-containers.html">
        Solid Pod Containers
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d34ef9f7.js" defer></script><script src="/assets/js/2.8445d36e.js" defer></script><script src="/assets/js/3.1f38620c.js" defer></script>
  </body>
</html>
